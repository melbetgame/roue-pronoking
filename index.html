<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>Roue de la chance</title>
  <style>
    body { margin:0; background:#0b0b12; color:#fff; display:flex; flex-direction:column; align-items:center; justify-content:center; height:100vh; font-family: Arial, sans-serif; gap:20px; padding:20px; }
    .wheel-container { position:relative; width:400px; height:400px; }
    canvas { width:100%; height:100%; border-radius:50%; display:block; }
    /* pointeur posÃ© SUR la roue, vers le haut */
    .pointer { position:absolute; left:50%; top:50%; transform:translate(-50%,-190px); width:0; height:0; border-left:20px solid transparent; border-right:20px solid transparent; border-top:40px solid #ef4444; z-index:10; pointer-events:none; }
    button { padding:12px 24px; background:#f6c84c; border:none; border-radius:10px; font-weight:700; cursor:pointer; min-width:220px; }
    .modal { display:none; position:fixed; inset:0; background:rgba(0,0,0,0.6); align-items:center; justify-content:center; }
    .panel { background:#071127; padding:18px; border-radius:10px; text-align:center; width:300px; }
    .panel a { display:inline-block; margin-top:10px; background:#f6c84c; padding:10px 14px; border-radius:8px; color:#000; font-weight:700; text-decoration:none; }
    @media (max-width:420px){ .wheel-container{width:320px;height:320px;} .pointer{transform:translate(-50%,-155px);} }
  </style>
</head>
<body>
  <div class="wheel-container">
    <canvas id="wheel" width="400" height="400"></canvas>
    <div class="pointer" aria-hidden="true"></div>
  </div>

  <button id="spin">TOURNER LA ROUE</button>

  <div class="modal" id="modal">
    <div class="panel">
      <h2>ðŸŽ‰ FÃ©licitations !</h2>
      <p id="winAmount">Vous avez gagnÃ© ...</p>
      <a id="claimBtn" href="#">Obtenir le bonus</a>
    </div>
  </div>

  <script>
    const wheel = document.getElementById('wheel');
    const ctx = wheel.getContext('2d');

    // Ordre des segments tel qu'on les dessine
    const segments = ["5â‚¬","10â‚¬","20â‚¬","30â‚¬","100â‚¬","200â‚¬","250â‚¬","300â‚¬","500â‚¬","1000â‚¬"];
    const colors = ["#f6c84c","#ff7b54","#4cd964","#34a1eb","#c56cf0","#ff5c5c","#7bed9f","#ffa94d","#74b9ff","#e77f67"];

    const W = wheel.width, H = wheel.height;
    const cx = W/2, cy = H/2, radius = 180;
    const n = segments.length;
    const arc = (2 * Math.PI) / n;

    function drawWheel(startAngle = 0) {
      ctx.clearRect(0,0,W,H);
      for (let i=0;i<n;i++){
        const a = startAngle + i*arc;
        ctx.beginPath();
        ctx.moveTo(cx,cy);
        ctx.arc(cx,cy,radius,a,a+arc);
        ctx.closePath();
        ctx.fillStyle = colors[i % colors.length];
        ctx.fill();
        ctx.strokeStyle = '#061021'; ctx.lineWidth = 2; ctx.stroke();
        // texte
        ctx.save();
        ctx.translate(cx,cy);
        ctx.rotate(a + arc/2);
        ctx.textAlign = 'right';
        ctx.fillStyle = '#061021';
        ctx.font = 'bold 18px Arial';
        ctx.fillText(segments[i], radius - 10, 8);
        ctx.restore();
      }
    }
    drawWheel(0);

    const spinBtn = document.getElementById('spin');
    const modal = document.getElementById('modal');
    const winAmountEl = document.getElementById('winAmount');
    const claimBtn = document.getElementById('claimBtn');

    function randomInt(min,max){ return Math.floor(Math.random()*(max-min+1))+min; }
    function easeOutCubic(t){ return 1 - Math.pow(1 - t, 3); }

    spinBtn.addEventListener('click', () => {
      spinBtn.disabled = true;
      const spins = randomInt(5,8);
      const extra = Math.random() * 2 * Math.PI; // angle alÃ©atoire final
      const targetRotation = spins * 2 * Math.PI + extra;
      const duration = 4200;
      const startTime = performance.now();
      const startAngle = 0; // on part de 0 dans cette version

      function animate
