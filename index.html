!-- FILE: index.html -->
<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Roue Pronokings â€” Tournez et Gagnez</title>
  <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#0b0b12; --accent:#f6c84c; --danger:#ef4444;
      font-family: 'Rubik', system-ui, -apple-system, 'Segoe UI', Roboto, Arial;
    }
    body{margin:0; background:#0b0b12; display:flex; justify-content:center; align-items:center; height:100vh; color:#fff; font-family:'Rubik', sans-serif;}
    .wheel-container{position:relative; text-align:center;}
    canvas#wheel{border-radius:50%;}
    .pointer{position:absolute; top:-10px; left:50%; transform:translateX(-50%); width:0; height:0; border-left:20px solid transparent; border-right:20px solid transparent; border-bottom:40px solid var(--danger);}
    .spin-btn{margin-top:20px;padding:12px 20px;background:var(--accent); color:#0b0b12; font-weight:700; font-size:16px; border:none; border-radius:10px; cursor:pointer;}
    .modal{display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.6); display:flex; align-items:center; justify-content:center; z-index:100;}
    .panel{background:#071127; padding:20px; border-radius:12px; text-align:center; width:300px;}
    .panel h2{margin:0 0 10px;}
    .btn-primary{padding:10px 16px; background:var(--accent); color:#0b0b12; text-decoration:none; font-weight:700; border-radius:8px; display:inline-block;}
    .btn-close{margin-top:10px; display:inline-block; padding:8px 14px; background:transparent; color:#fff; border:1px solid rgba(255,255,255,0.3); border-radius:8px; cursor:pointer;}
  </style>
</head>
<body>
  <div class="wheel-container">
    <div class="pointer"></div>
    <canvas id="wheel" width="400" height="400"></canvas>
    <button class="spin-btn" id="spin">TOURNER LA ROUE</button>
  </div>

  <div class="modal" id="modal">
    <div class="panel">
      <h2>ðŸŽ‰ FÃ©licitations !</h2>
      <p id="winAmount">Vous avez gagnÃ© <strong>0â‚¬</strong></p>
      <a id="claimBtn" class="btn-primary" href="#">Cliquez ici pour recevoir votre bonus</a>
      <button class="btn-close" id="closeBtn">Fermer</button>
    </div>
  </div>

  <script>
    const SEGMENTS=["10â‚¬","20â‚¬","5â‚¬","100â‚¬","200â‚¬","250â‚¬","300â‚¬","500â‚¬","1000â‚¬"];
    const COLORS=["#ffbf00","#ff5c5c","#ffd166","#7ae582","#7cc8ff","#c08bff","#ff7ab6","#ffa94d","#6ee7b7"];
    const canvas=document.getElementById('wheel');
    const ctx=canvas.getContext('2d');
    const cx=canvas.width/2, cy=canvas.height/2, radius=180;
    let startAngle=0;

    function drawWheel(){
      ctx.clearRect(0,0,canvas.width,canvas.height);
      const arc=(Math.PI*2)/SEGMENTS.length;
      for(let i=0;i<SEGMENTS.length;i++){
        const angle=startAngle+i*arc;
        ctx.beginPath();
        ctx.moveTo(cx,cy);
        ctx.arc(cx,cy,radius,angle,angle+arc);
        ctx.closePath();
        ctx.fillStyle=COLORS[i%COLORS.length];
        ctx.fill();
        ctx.strokeStyle='#061021'; ctx.lineWidth=2; ctx.stroke();
        ctx.save(); ctx.translate(cx,cy); ctx.rotate(angle+arc/2); ctx.textAlign='right'; ctx.fillStyle='#061021'; ctx.font='bold 18px Rubik'; ctx.fillText(SEGMENTS[i], radius-10, 5); ctx.restore();
      }
    }
    drawWheel();

    const spinBtn=document.getElementById('spin');
    const modal=document.getElementById('modal');
    const winAmountEl=document.getElementById('winAmount');
    const claimBtn=document.getElementById('claimBtn');
    const closeBtn=document.getElementById('closeBtn');

    function randomInt(min,max){return Math.floor(Math.random()*(max-min+1))+min;}
    function easeOut(t){return 1-Math.pow(1-t,3);}

    spinBtn.addEventListener('click',()=>{
      const chosenIndex=randomInt(0,SEGMENTS.length-1);
      const arc=(Math.PI*2)/SEGMENTS.length;
      const targetAngle=(Math.PI*2)*randomInt(5,8)+(Math.PI*2-(chosenIndex*arc+arc/2)+Math.PI/2);
      const duration=4000;
      const from=startAngle;
      let start=null;
      function animate(timestamp){
        if(!start)start=timestamp;
        const elapsed=timestamp-start;
        const t=Math.min(1,elapsed/duration);
        const eased=easeOut(t);
        startAngle=from+(targetAngle-from)*eased;
        drawWheel();
        if(t<1) requestAnimationFrame(animate);
        else{
          startAngle=startAngle%(Math.PI*2);
          const landed=Math.floor(((Math.PI*2-(startAngle-Math.PI/2))%(Math.PI*2))/arc);
          const amount=SEGMENTS[landed];
          winAmountEl.innerHTML=`Vous avez gagnÃ© <strong>${amount}</strong>`;
          claimBtn.href=`promo.html?amount=${encodeURIComponent(amount)}`;
          modal.style.display='flex';
        }
      }
      requestAnimationFrame(animate);
    });

    closeBtn.addEventListener('click',()=>{modal.style.display='none';});
  </script>
</body>
</html>
